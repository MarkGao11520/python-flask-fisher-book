# 10.1 最近的礼物

我们的首页会显示最近的赠送书籍列表。这个列表有三个限制条件：
1.数量不超过30
2.按照时间倒序排列，最新的排在最前面
3.去重，同一本书籍的礼物不重复出现

### 1.首先编写复杂SQL对应的ORM代码
由于是最近的礼物，所以应该编写在models/gift.py中
```python
    def recent(self):
        # 链式调用
        # select distinct * from gift group by isbn order by create_time limit 30
        recent_gifts = Gift.query\
            .filter_by(launched=False)\
            .group_by(Gift.isbn)\
            .order_by(Gift.create_time)\
            .limit(30)\
            .distinct().all()
        return recent_gifts
```