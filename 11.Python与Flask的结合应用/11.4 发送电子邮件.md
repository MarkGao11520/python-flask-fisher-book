# 11.4 发送电子邮件

我们使用flask_mail来完成电子邮件的发送
```python
pipenv install flask-mail
```

### 1.在app中注册flask-mail
```python
    mail = Mail()
    mail.init_app(mail)
```

### 2.EMAIL配置
```python
# email配置
MAIL_SERVER = 'smtp.qq.com'
MAIL_PORT = 465
MAIL_USE_SSL = True
MAIL_USE_TSL = False
MAIL_USERNAME = '1152057576@qq.com'
# QQ邮箱->设置->账户->[POP3...]->生成授权码->发送短信->获取授权码
MAIL_PASSWORD = 'pstomjiomwyybadh'
```

### 3.编写邮件工具类
```python
def send_email(to, subject, template, **kwargs):
    msg = Message(
        subject,
        sender=current_app.config['MAIL_USERNAME'],
        recipients=[to])
    # 发送一封HTML邮件
    mail.html = render_template(template, kwargs)
    mail.send(msg)
```